{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///D:/iscore%20db/FAQ-Ai-System-iscore/src/images/iscore.png.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 168, height: 52, blurWidth: 8, blurHeight: 2, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR42gFCAL3/AC6ChlBVY2o6VFNaLlNRWCtYVmEwV1RfLWVgbTk/O0UgADB6f06SnqpkoZ6qYJmWolWfnKhieHaARZGOmWReXGU4AC4ZiEbMzt4AAAAASUVORK5CYII=\"};\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gHAAA,CAAA,UAAG;IAAE,OAAO;IAAK,QAAQ;IAAI,WAAW;IAAG,YAAY;IAAG,aAAa;AAA4M","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///D:/iscore%20db/FAQ-Ai-System-iscore/src/app/chatpage/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from 'next/image';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTheme } from 'next-themes';\r\n\r\n// FontAwesome\r\nimport { config } from '@fortawesome/fontawesome-svg-core';\r\nimport '@fortawesome/fontawesome-svg-core/styles.css';\r\nconfig.autoAddCss = false;\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHouse, faPlus, faBars, faSun, faPaperPlane, faMagnifyingGlass, faLanguage, faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// Images\r\nimport iscore from '@/images/iscore.png';\r\n\r\n// Add the missing formatTime function\r\nconst formatTime = (date: Date): string => {\r\n  return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n};\r\n\r\n// Add ChatBoxProps type definition\r\ntype ChatBoxProps = {\r\n  resetTrigger: number;\r\n  isArabic: boolean;\r\n  setIsArabic: (value: boolean) => void;\r\n};\r\n\r\n// Add session ID generation\r\nconst generateSessionId = () => {\r\n  return 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();\r\n};\r\n\r\n// Bot reply logic with vacation query support\r\nconst botReply = async (userMessage: string, isArabic: boolean = true, sessionId: string, isCommonQuestion: boolean = false): Promise<{text: string, questionId: number | null, status: string}> => {\r\n  try {\r\n    const response = await fetch('http://localhost:5000/ask', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ \r\n        question: userMessage,\r\n        language: isArabic ? 'ar' : 'en',\r\n        session_id: sessionId,\r\n        is_common_question: isCommonQuestion  // NEW: Flag for dropdown clicks\r\n      }),\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Failed to get response from server');\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (data.answers && data.answers.length > 0) {\r\n      return {\r\n        text: data.answers[0],\r\n        questionId: data.question_id || null,\r\n        status: data.status || 'answered'\r\n      };\r\n    } else {\r\n      return {\r\n        text: isArabic \r\n          ? 'عذرًا، لم أجد إجابة مناسبة لسؤالك، لقد أرسلنا سؤالك لفريقنا للإجابة عليه في أقرب وقت ممكن.'\r\n          : 'Sorry, I could not find a suitable answer to your question, we sent this question to our team to answer you as soon as possible.',\r\n        questionId: null,\r\n        status: 'pending'\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.error('Error calling FAQ API:', error);\r\n    return {\r\n      text: isArabic \r\n        ? 'عذرًا، حدث خطأ في الاتصال بالخادم. تأكد من تشغيل الخادم على المنفذ 5000.'\r\n        : 'Sorry, there was an error connecting to the server. Make sure the server is running on port 5000.',\r\n      questionId: null,\r\n      status: 'error'\r\n    };\r\n  }\r\n};\r\n\r\n// Update Message type\r\ntype Message = {\r\n  sender: 'user' | 'bot' | 'system';\r\n  text: string;\r\n  timestamp: string;\r\n  questionId?: number | null;\r\n  status?: string;\r\n};\r\n\r\n// Add Common Questions Component\r\nfunction CommonQuestionsDropdown({ isArabic, onQuestionSelect }: { \r\n  isArabic: boolean; \r\n  onQuestionSelect: (question: string) => void; \r\n}) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [questions, setQuestions] = useState<Array<{id: string, text: string}>>([]);\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    fetchCommonQuestions();\r\n  }, [isArabic]);\r\n\r\n  const fetchCommonQuestions = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/common-questions?language=${isArabic ? 'ar' : 'en'}`);\r\n      const data = await response.json();\r\n      setQuestions(data.questions || []);\r\n    } catch (error) {\r\n      console.error('Error fetching common questions:', error);\r\n    }\r\n  };\r\n\r\n  const handleQuestionClick = (questionText: string) => {\r\n    onQuestionSelect(questionText);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${\r\n          theme === 'dark' \r\n            ? 'bg-gray-700 text-white hover:bg-gray-600' \r\n            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n        }`}>\r\n        {isArabic ? 'الأسئلة الشائعة ▼' : 'Common Questions ▼'}\r\n      </button>\r\n\r\n      {isOpen && (\r\n        <div className={`absolute bottom-full mb-2 w-85 rounded-lg shadow-lg border z-10 \r\n          ${theme === 'dark' ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-200'}\r\n          ${isArabic ? 'right-0.5' : 'left-0.5'}\r\n          `}>\r\n          <div className=\"p-2\">\r\n            <p className={`text-s font-medium mb-2 text-center pb-2 border-b-2  ${\r\n              theme === 'dark' ? 'text-gray-300 border-b-gray-600' : 'text-gray-600 border-b-gray-200'\r\n            }`}>\r\n              {isArabic ? 'اختر سؤالاً شائعاً' : 'Select a common question'}\r\n            </p>\r\n            {questions.map((question) => (\r\n              <button\r\n                key={question.id}\r\n                onClick={() => handleQuestionClick(question.text)}\r\n                className={`w-full p-2 text-sm rounded hover:transition-colors duration-200 \r\n                  ${theme === 'dark' ? 'hover:bg-gray-700 text-white' : 'hover:bg-gray-100 text-gray-700'}\r\n                  ${isArabic ? 'text-right' : 'text-left'}\r\n                `}>\r\n                {question.text}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n// ChatBox Component with vacation query support\r\nfunction ChatBox({ resetTrigger, isArabic, setIsArabic }: ChatBoxProps) {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState<string>('');\r\n  const [isTyping, setIsTyping] = useState<boolean>(false);\r\n  const [feedback, setFeedback] = useState<{ [key: number]: 'up' | 'down' | null }>({});\r\n  const [feedbackMessage, setFeedbackMessage] = useState<{ [key: number]: string }>({});\r\n  const [mounted, setMounted] = useState(false);\r\n  const [sessionId] = useState(() => generateSessionId());\r\n\r\n  // Fix hydration issue\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  // Initialize chat when component mounts or language changes\r\n  useEffect(() => {\r\n    if (mounted) {\r\n      resetChat();\r\n    }\r\n  }, [resetTrigger, isArabic, mounted]);\r\n\r\n  const sendMessage = async (messageText?: string, isCommonQuestion: boolean = false): Promise<void> => {\r\n    const textToSend = messageText || input.trim();\r\n    if (textToSend === '') return;\r\n\r\n    const userMsg: Message = {\r\n      sender: 'user',\r\n      text: textToSend,\r\n      timestamp: formatTime(new Date())\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMsg]);\r\n    if (!messageText) setInput('');\r\n    setIsTyping(true);\r\n\r\n    try {\r\n      const { text: replyText, questionId, status } = await botReply(textToSend, isArabic, sessionId, isCommonQuestion);\r\n      const reply: Message = {\r\n        sender: 'bot',\r\n        text: replyText,\r\n        timestamp: formatTime(new Date()),\r\n        questionId: questionId,\r\n        status: status\r\n      };\r\n      setMessages((prev) => [...prev, reply]);\r\n    } catch (error) {\r\n      const errorReply: Message = {\r\n        sender: 'bot',\r\n        text: isArabic ? 'عذرًا، حدث خطأ أثناء معالجة سؤالك.' : 'Sorry, an error occurred while processing your question.',\r\n        timestamp: formatTime(new Date())\r\n      };\r\n      setMessages((prev) => [...prev, errorReply]);\r\n    } finally {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>): void => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const handleCommonQuestionSelect = (question: string) => {\r\n    sendMessage(question, true);  // Pass true for isCommonQuestion\r\n  };\r\n\r\n  // Update the handleFeedback function to use the correct parameter type\r\n  const handleFeedback = async (questionId: number, feedbackType: 'up' | 'down') => {\r\n    const currentFeedback = feedback[questionId];\r\n    const newFeedback = currentFeedback === feedbackType ? null : feedbackType;\r\n    \r\n    setFeedback(prev => ({\r\n      ...prev,\r\n      [questionId]: newFeedback\r\n    }));\r\n\r\n    console.log(`Feedback for question ID ${questionId} - ${newFeedback || 'removed'}`);\r\n    \r\n    // Send feedback to database if questionId exists\r\n    if (questionId && newFeedback !== null) {\r\n      try {\r\n        await fetch('http://localhost:5000/feedback', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            question_id: questionId,\r\n            is_good: newFeedback === 'up'\r\n          }),\r\n        });\r\n        \r\n        console.log(`Feedback sent to database: ${newFeedback === 'up' ? 'positive' : 'negative'}`);\r\n        \r\n        // Show feedback message - PERSISTENT (no timeout removal)\r\n        const thankYouMessage = isArabic ? 'شكراً لك على تقييمك!' : 'Thanks for your feedback!';\r\n        setFeedbackMessage(prev => ({\r\n          ...prev,\r\n          [questionId]: thankYouMessage\r\n        }));\r\n        \r\n      } catch (error) {\r\n        console.error('Error sending feedback:', error);\r\n        const errorMessage = isArabic ? 'خطأ في إرسال التقييم' : 'Error sending feedback';\r\n        setFeedbackMessage(prev => ({\r\n          ...prev,\r\n          [questionId]: errorMessage\r\n        }));\r\n        \r\n        // Clear error message after 3 seconds (keep error timeout)\r\n        setTimeout(() => {\r\n          setFeedbackMessage(prev => {\r\n            const newState = { ...prev };\r\n            if (newState[questionId] === errorMessage) {\r\n              delete newState[questionId];\r\n            }\r\n            return newState;\r\n          });\r\n        }, 3000);\r\n      }\r\n    } else if (newFeedback === null) {\r\n      // Only clear feedback message when feedback is completely removed (clicked same button twice)\r\n      setFeedbackMessage(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[questionId];\r\n        return newState;\r\n      });\r\n    }\r\n  };\r\n\r\n  const resetChat = (): void => {\r\n    if (!mounted) return;\r\n    \r\n    const now = new Date();\r\n    const formattedDate = now.toLocaleDateString(undefined, {\r\n      weekday: 'short',\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric'\r\n    });\r\n  \r\n    setMessages([\r\n      {\r\n        sender: 'system',\r\n        text: `${formattedDate}`,\r\n        timestamp: formatTime(now)\r\n      },\r\n      {\r\n        sender: 'bot',\r\n        text: isArabic ? 'مرحباً! كيف يمكنني مساعدتك؟' : 'Hello! How can I help you?',\r\n        timestamp: formatTime(new Date())\r\n      }\r\n    ]);\r\n    \r\n    setFeedback({});\r\n    setFeedbackMessage({});\r\n  };\r\n\r\n  const { theme } = useTheme();\r\n\r\n  if (!mounted) {\r\n    return (\r\n      <div className=\"flex flex-col h-full justify-center items-center\">\r\n        <div className=\"text-gray-500\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full justify-between p-4\">\r\n      {/* Chat messages */}\r\n      <div className=\"flex-1 overflow-y-auto space-y-4 pr-2\">\r\n        {messages.map((msg, index) => (\r\n          msg.sender === 'system' ? (\r\n            <div key={index} className=\"flex justify-center my-4\">\r\n              <div className={`text-sm italic\r\n                        ${theme === 'dark' ? 'text-white' : 'text-gray-600'}`}>\r\n                ───────────── {msg.text} ─────────────\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div key={index} className={`flex flex-col ${msg.sender === 'user' ? 'items-end' : 'items-start'}`}>\r\n              <div\r\n                className={`max-w-[70%] px-4 py-2 rounded-2xl shadow ${\r\n                  msg.sender === 'user' ? 'bg-[#4f3795] text-white' : 'bg-[#3ec1c7] text-white'\r\n                } ${isArabic ? 'rtl arabic-text' : 'ltr'}`}>\r\n                <p className={isArabic ? 'text-right' : 'text-left'}>{msg.text}</p>\r\n              </div>\r\n              \r\n              {/* Feedback buttons for bot messages only (except vacation queries) */}\r\n              {msg.sender === 'bot' && (\r\n                <div className=\"flex items-center justify-between mt-2\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {/* Only show feedback buttons if there's a question_id (model responses) */}\r\n                    {msg.questionId && (\r\n                      <>\r\n                        <button\r\n                          onClick={() => handleFeedback(msg.questionId!, 'up')}  // Changed from true to 'up'\r\n                          className={`p-1 rounded transition-colors duration-200 ${\r\n                            feedback[msg.questionId!] === 'up'\r\n                              ? 'bg-green-500 text-white'\r\n                              : theme === 'dark' \r\n                                ? 'hover:bg-gray-600 text-gray-300 hover:text-green-400' \r\n                                : 'hover:bg-gray-200 text-gray-600 hover:text-green-600'\r\n                          }`}\r\n                          title={isArabic ? 'مفيد' : 'Helpful'}\r\n                        >\r\n                          👍\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleFeedback(msg.questionId!, 'down')}  // Changed from false to 'down'\r\n                          className={`p-1 rounded transition-colors duration-200 ${\r\n                            feedback[msg.questionId!] === 'down'\r\n                              ? 'bg-red-500 text-white'\r\n                              : theme === 'dark' \r\n                                ? 'hover:bg-gray-600 text-gray-300 hover:text-red-400' \r\n                                : 'hover:bg-gray-200 text-gray-600 hover:text-red-600'\r\n                          }`}\r\n                          title={isArabic ? 'غير مفيد' : 'Not helpful'}\r\n                        >\r\n                          👎\r\n                        </button>\r\n                        \r\n                        {/* Show feedback message */}\r\n                        {feedbackMessage[msg.questionId!] && (\r\n                          <span className={`text-xs italic ml-2 ${\r\n                            theme === 'dark' ? 'text-green-400' : 'text-green-600'\r\n                          }`}>\r\n                            {feedbackMessage[msg.questionId!]}\r\n                          </span>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Show timestamp */}\r\n                  <span className={`text-xs ${\r\n                    theme === 'dark' ? 'text-gray-400' : 'text-gray-500'\r\n                  }`}>\r\n                    {msg.timestamp}\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        ))}\r\n\r\n        {isTyping && (\r\n          <div className=\"flex justify-start\">\r\n            <div className={`main text-gray-200 px-4 py-2 rounded-2xl max-w-[70%] italic ${\r\n              isArabic ? 'text-right rtl arabic-text' : 'text-left ltr'\r\n            }`}>\r\n              {isArabic ? 'جاري البحث، أرجو الانتظار' : 'Searching, Please Wait'}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Input with Common Questions Dropdown */}\r\n      <div className=\"mt-4 space-y-2\">\r\n        {/* Common Questions Dropdown */}\r\n        <div className={`flex ${isArabic ? 'justify-end' : 'justify-start'}`}>\r\n          <CommonQuestionsDropdown \r\n            isArabic={isArabic} \r\n            onQuestionSelect={handleCommonQuestionSelect}\r\n          />\r\n        </div>\r\n        \r\n        {/* Input */}\r\n        <div className={`flex items-center rounded-full p-2\r\n                        ${theme === 'dark' ? 'bg-[#4f3795] text-white' : 'bg-[#3ec1c7] text-white'}`}>\r\n          <FontAwesomeIcon className=\"ml-3 text-white\" icon={faMagnifyingGlass}/>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={isArabic ? \"ما هو استفسارك\" : \"Ask About Anything...\"}\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            className={`flex-1 focus:outline-none focus:ring-0 rounded-full px-4 py-1.5 text-white placeholder-white/70 ${\r\n              isArabic ? 'text-right rtl arabic-text' : 'text-left ltr'\r\n            }`}\r\n          />\r\n\r\n          <button onClick={() => sendMessage()} className={`ml-3 bg-white px-4 py-2 rounded-full transition \r\n                           ${theme === 'dark' ? 'text-[#4f3795] hover:bg-[#3ec1c7] hover:text-white' : 'text-[#3ec1c7] hover:bg-[#4f3795] hover:text-white '}`}>\r\n            <FontAwesomeIcon icon={faPaperPlane}/>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main Page\r\nexport default function Home() {\r\n  const router = useRouter();\r\n  const [resetCounter, setResetCounter] = useState(0);\r\n  const [isArabic, setIsArabic] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // Fix hydration issue\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n  \r\n  const handleReset = () => {\r\n    setResetCounter(prev => prev + 1);\r\n  };\r\n\r\n  const toggleLanguage = () => {\r\n    const newLanguage = !isArabic;\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('isArabic', newLanguage.toString());\r\n    }\r\n    window.location.reload();\r\n  };\r\n\r\n  // Load language preference from localStorage on component mount\r\n  useEffect(() => {\r\n    if (mounted && typeof window !== 'undefined') {\r\n      const savedLanguage = localStorage.getItem('isArabic');\r\n      if (savedLanguage !== null) {\r\n        setIsArabic(savedLanguage === 'true');\r\n      }\r\n    }\r\n  }, [mounted]);\r\n\r\n  const { theme, setTheme } = useTheme();\r\n\r\n  // Don't render until mounted to prevent hydration mismatch\r\n  if (!mounted) {\r\n    return (\r\n      <div className=\"h-screen flex items-center justify-center\">\r\n        <div className=\"text-gray-500\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className={`h-screen flex flex-col items-center ${theme === 'dark' ? 'mainDARK' : 'main'}`}>\r\n        <div className=\"navBar h-[10%] w-[95%] flex flex-row items-center justify-center space-x-18 py-11\">\r\n          <div className='left flex gap-10 w-[30%] justify-center'>\r\n            <button type='button' className={`text-2xl ${theme === 'dark' ? 'iconsDARK' : 'icons'}`} onClick={() => router.push('/')}><FontAwesomeIcon icon={faHouse} /></button>\r\n            <button type='button' className={`text-2xl ${theme === 'dark' ? 'iconsDARK' : 'icons'}`} onClick={handleReset}><FontAwesomeIcon icon={faPlus}/></button>\r\n          </div>\r\n          <div className={`middle w-[30%] flex items-center justify-center gap-5\r\n                        ${isArabic ? 'flex-row-reverse' : 'flex-row'}`}>\r\n            <p className='font-bold text-white text-3xl'>{isArabic ? 'تحدث مع' : 'Chat With'}</p>\r\n            <Image src={iscore} alt=\"iScore\" width={150} />\r\n          </div>\r\n          <div className='right w-[30%] flex justify-center gap-10'>\r\n            <button type='button' className={`text-2xl ${theme === 'dark' ? 'iconsDARK' : 'icons'}`} onClick={toggleLanguage}><FontAwesomeIcon icon={faLanguage}/></button>\r\n            <button type='button' className={`text-2xl ${theme === 'dark' ? 'iconsDARK' : 'icons'}`} onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}><FontAwesomeIcon spin icon={faSun}/></button>\r\n            <button type='button' className={`text-2xl ${theme === 'dark' ? 'iconsDARK' : 'icons'}`}><FontAwesomeIcon icon={faBars}/></button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Chat Section */}\r\n        <div className={`chat h-[83%] w-[90%] rounded-4xl transition-colors duration-300\r\n                      ${theme === 'dark' ? 'bg-gray-800' : 'bg-gray-100'}`}>\r\n          <ChatBox resetTrigger={resetCounter} isArabic={isArabic} setIsArabic={setIsArabic}/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}